<!DOCTYPE html>
{% load static %}
<html lang="en">
<head data-theme="light">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login and Register</title>

    <link href="{% static 'css/output.css' %}" rel="stylesheet">
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen">

<div class="w-full max-w-md p-6 bg-white rounded-lg shadow-lg">
    <!-- Toggle Buttons for Login and Register -->
    <div class="flex justify-center mb-4">
        <button id="login-tab" class="tab tab-lg tab-bordered" onclick="showLogin()">Login</button>
        <button id="register-tab" class="tab tab-lg tab-bordered" onclick="showRegister()">Register</button>
    </div>

    <!-- Login Form -->
    <form id="login-form" class="space-y-4">
        <div class="form-control">
            <label class="label">Username</label>
            <input type="text" placeholder="Enter username" class="input input-bordered w-full" required>
        </div>
        <div class="form-control relative">
            <label class="label">Password</label>
            <input id="login-password" type="password" placeholder="Enter password" class="input input-bordered w-full" required>
            <button type="button" onclick="togglePassword('login-password')" class="absolute right-2 top-10 text-gray-500">
                üëÅÔ∏è
            </button>
            <button class="btn">Button</button>
            <button class="btn btn-primary">Button</button>

        </div>
        <button class="btn btn-primary w-full">Login</button>
    </form>

    <!-- Register Form -->
    <form id="register-form" class="space-y-4 hidden">
        <div class="form-control">
            <label class="label">Username</label>
            <input id="register-username" type="text" placeholder="Enter username" class="input input-bordered w-full" required>
        </div>
        <div class="form-control relative">
            <label class="label">Password</label>
            <input id="register-password" type="password" placeholder="Create password" class="input input-bordered w-full" required>
            <button type="button" onclick="togglePassword('register-password')" class="absolute right-2 top-10 text-gray-500">üëÅÔ∏è</button>
        </div>
        <div class="form-control relative">
            <label class="label">Confirm Password</label>
            <input id="confirm-password" type="password" placeholder="Confirm password" class="input input-bordered w-full" required>
            <button type="button" onclick="togglePassword('confirm-password')" class="absolute right-2 top-10 text-gray-500">üëÅÔ∏è</button>
        </div>
        <button type="submit" class="btn btn-primary w-full">Register</button>
    </form>
</div>

<!-- Modals for Error Messages -->
<div id="username-modal" class="modal hidden">
    <div class="modal-box">
        <h3 class="font-bold text-lg">Error</h3>
        <p>Username already taken</p>
        <div class="modal-action">
            <button class="btn" onclick="closeModal('username-modal')">Close</button>
        </div>
    </div>
</div>

<div id="password-modal" class="modal hidden">
    <div class="modal-box">
        <h3 class="font-bold text-lg">Error</h3>
        <p>Passwords do not match</p>
        <div class="modal-action">
            <button class="btn" onclick="closeModal('password-modal')">Close</button>
        </div>
    </div>
</div>

<script>
    // Toggle between login and register forms
    function showLogin() {
        document.getElementById("login-form").classList.remove("hidden");
        document.getElementById("register-form").classList.add("hidden");
    }

    function showRegister() {
        document.getElementById("login-form").classList.add("hidden");
        document.getElementById("register-form").classList.remove("hidden");
    }

    // Toggle Password Visibility
    function togglePassword(fieldId) {
        const field = document.getElementById(fieldId);
        field.type = field.type === "password" ? "text" : "password";
    }

    // Show and Close Modals
    function showModal(modalId) {
        document.getElementById(modalId).classList.remove("hidden");
    }

    function closeModal(modalId) {
        document.getElementById(modalId).classList.add("hidden");
    }

    // Register form validation
    document.getElementById("register-form").addEventListener("submit", (e) => {
        e.preventDefault();
        const password = document.getElementById("register-password").value;
        const confirmPassword = document.getElementById("confirm-password").value;

        // Check if passwords match
        if (password !== confirmPassword) {
            showModal("password-modal");
        } else {
            // Check if username is taken (mocked)
            const username = document.getElementById("register-username").value;
            if (username.toLowerCase() === "takenusername") {
                showModal("username-modal");
            } else {
                alert("Registration successful!");
            }
        }
    });
</script>

</body>
</html>
